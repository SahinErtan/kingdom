{% extends "layouts/common.html" %}

{% block body %}
	{% from "security/_macros.html" import render_field_with_errors, render_field %}
	{% include "security/_messages.html" %}
	<h1>Change password</h1>
	<form action="{{ url_for_security('change_password') }}" method="POST" name="change_password_form" class="ui form segment">
	{{ change_password_form.hidden_tag() }}
	{{ render_field_with_errors(change_password_form.password) }}
	{{ render_field_with_errors(change_password_form.new_password) }}
	{{ render_field_with_errors(change_password_form.new_password_confirm) }}
	{{ render_field(change_password_form.submit) }}
	</form>
	{% include "security/_menu.html" %}

	<script>

		var styling = {};

		styling.password_field = function(){
			$('input#password')
				.wrap('<div class="ui left labeled icon input"></div>')
				.parent()
				.append('<i class="lock icon"></i>')
				.append('<div class="ui corner label"><i class="icon asterisk"></i></div>');
		}

		styling.new_password_field = function(){
			$('input#new_password')
				.wrap('<div class="ui left labeled icon input"></div>')
				.parent()
				.append('<i class="lock icon"></i>')
				.append('<div class="ui corner label"><i class="icon asterisk"></i></div>');
		}

		styling.new_password_confirm_field = function(){
			$('input#new_password_confirm')
				.wrap('<div class="ui left labeled icon input"></div>')
				.parent()
				.append('<i class="lock icon"></i>')
				.append('<div class="ui corner label"><i class="icon asterisk"></i></div>');
		}

		styling.submit_field = function(){
			$('input#submit')
				.attr('class', 'ui blue submit button');
		}

		$(function(){
			styling.password_field();
			styling.new_password_field();
			styling.new_password_confirm_field();
			styling.submit_field();
		});

	</script>
{% endblock %}
